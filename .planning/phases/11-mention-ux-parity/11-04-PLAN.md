---
phase: 11-mention-ux-parity
plan: 04
type: execute
wave: 4
depends_on:
  - 11-mention-ux-parity/11-03-PLAN.md
files_modified:
  - docs/runbooks/mentions.md
autonomous: false

must_haves:
  truths:
    - "@claude and @kodiai mentions produce a response on a real PR when useful"
    - "Inline review-comment mentions reply in the same thread"
    - "Tracking is eyes-only; no tracking comment is created"
  artifacts:
    - path: "docs/runbooks/mentions.md"
      provides: "Operator + maintainer checklist for mention flows"
      contains: "pr_review_comment"
  key_links:
    - from: "docs/runbooks/mentions.md"
      to: "src/handlers/mention.ts"
      via: "Runbook maps symptoms to logs and code locations"
      pattern: "deliveryId"
---

<objective>
Verify mention UX end-to-end against real GitHub surfaces and write a short runbook for operators/maintainers.

Purpose: Ensure xbmc devs get the expected in-thread replies and contextual answers.
Output: Human-verified behavior + a runbook.
</objective>

<execution_context>
@/home/keith/.claude/get-shit-done/workflows/execute-plan.md
@/home/keith/.claude/get-shit-done/templates/summary.md
@/home/keith/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/STATE.md
@src/handlers/mention.ts
@src/execution/mention-prompt.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write mention troubleshooting runbook</name>
  <files>docs/runbooks/mentions.md</files>
  <action>
  Document the high-signal checks for mention failures:
  - webhook delivery received (deliveryId)
  - mention detected (surface, author, accepted handle)
  - eyes reaction attempt (success/failure is non-blocking)
  - publish path chosen (top-level vs inline-thread)
  - common reasons for no reply (empty question, prompt chose to skip, API failure)
  Include concrete GitHub UI steps and `gh` commands.
  </action>
  <verify>
  - File exists and includes a short, actionable checklist
  </verify>
  <done>
  Operators can diagnose "reaction happened but no reply" without reading source.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>End-to-end mention UX (alias + context + inline thread replies)</what-built>
  <how-to-verify>
  1) Choose a real PR with an inline review comment thread.
  2) In an inline PR review comment thread, comment: `@claude <a real question>`.
     Expected:
     - ðŸ‘€ reaction on the trigger comment (best-effort)
     - reply appears in the same inline thread
  3) In a PR top-level comment, comment: `@kodiai <a real question>`.
     Expected:
     - ðŸ‘€ reaction
     - reply appears as a normal PR comment
  4) Confirm no tracking comment is created.
  </how-to-verify>
  <resume-signal>Type "approved" or describe what failed and link the PR/comment(s)</resume-signal>
</task>

</tasks>

<verification>
- Human verification checkpoint must pass
</verification>

<success_criteria>
- Verified inline-thread replies + contextual answers on real GitHub threads
- Runbook exists for operational support
</success_criteria>

<output>
After completion, create `.planning/phases/11-mention-ux-parity/11-04-SUMMARY.md`
</output>
