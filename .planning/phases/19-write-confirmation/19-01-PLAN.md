---
phase: 19-write-confirmation
plan: 01
type: execute
wave: 1
depends_on:
  - 18-ops-evidence/18-01-SUMMARY.md
files_modified:
  - src/handlers/mention.ts
  - src/execution/mention-prompt.ts
  - docs/runbooks/mentions.md
autonomous: true

must_haves:
  truths:
    - "Users can request a plan without performing writes"
    - "Plan output is concise and uses explicit files/steps"
    - "Existing apply/change write workflow is unchanged"
---

<objective>
Add an explicit plan-only mention mode so maintainers can ask "what would you change" before triggering write-mode.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Add plan: mention intent</name>
  <files>src/handlers/mention.ts</files>
  <action>
  Extend write-intent parsing to support a plan-only keyword:
  - `plan: <request>` -> produce a plan and do not edit files, commit, push, or open PRs.
  Keep existing `apply:` / `change:` behaviors unchanged.
  </action>
  <verify>
  - bun test
  </verify>
</task>

<task type="auto">
  <name>Task 2: Prompt guidance for plan output</name>
  <files>src/execution/mention-prompt.ts</files>
  <action>
  Add explicit guidance for plan-only mode to return:
  - a short intent sentence
  - 3-7 steps
  - file list
  - ask for confirmation to proceed with `apply:`
  </action>
</task>

<task type="auto">
  <name>Task 3: Update mentions runbook</name>
  <files>docs/runbooks/mentions.md</files>
  <action>
  Document `plan:` and how it differs from `apply:` / `change:`.
  </action>
</task>

</tasks>

<verification>
- bun test
</verification>

<output>
Create `.planning/phases/19-write-confirmation/19-01-SUMMARY.md`.
</output>
