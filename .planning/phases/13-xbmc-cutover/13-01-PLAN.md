---
phase: 13-xbmc-cutover
plan: 01
type: execute
wave: 1
depends_on:
  - 12-fork-pr-robustness/12-03-PLAN.md
files_modified:
  - docs/runbooks/xbmc-cutover.md
autonomous: false

user_setup:
  - service: github
    why: "Install Kodiai GitHub App on xbmc/xbmc and configure webhook"

must_haves:
  truths:
    - "Kodiai GitHub App is installed on xbmc/xbmc with required permissions"
    - "Webhook deliveries from xbmc/xbmc reach the Kodiai deployment"
    - "A smoke test proves mention + auto-review work end-to-end"
  artifacts:
    - path: "docs/runbooks/xbmc-cutover.md"
      provides: "Step-by-step cutover + smoke tests"
      contains: "xbmc/xbmc"
  key_links:
    - from: "GitHub App settings"
      to: "Azure Container Apps webhook endpoint"
      via: "Webhook URL"
      pattern: "/webhooks/github"
---

<objective>
Cut over xbmc/xbmc from @claude GitHub Actions to Kodiai GitHub App with immediate usability: install, webhook wire-up, and smoke tests.

Purpose: Ensure devs can keep using @claude (alias) and get inline-thread replies and contextual answers.
Output: A cutover runbook and verified installation/webhook delivery.
</objective>

<execution_context>
@/home/keith/.claude/get-shit-done/workflows/execute-plan.md
@/home/keith/.claude/get-shit-done/templates/summary.md
@/home/keith/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/STATE.md
@docs/runbooks/review-requested-debug.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Write xbmc cutover runbook (install + webhook + smoke tests)</name>
  <files>docs/runbooks/xbmc-cutover.md</files>
  <action>
  Document:
  - Required GitHub App permissions for xbmc/xbmc
  - Webhook URL and expected HTTP response semantics
  - How to confirm deliveries in GitHub App UI
  - Smoke tests:
    - comment `@claude <question>` on PR top-level
    - comment `@claude <question>` inside inline review thread
    - open PR triggers auto-review
    - manual review re-request triggers one job
  </action>
  <verify>
  - File exists and is actionable
  </verify>
  <done>
  Maintainers have a single checklist to perform the cutover.
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Install Kodiai GitHub App on xbmc/xbmc and configure webhook</action>
  <instructions>
  1) Install the Kodiai GitHub App on `xbmc/xbmc` (or the xbmc org with repo access).
  2) Ensure webhook URL points to the Kodiai deployment `/webhooks/github`.
  3) Confirm at least one delivery succeeds (200) in GitHub App delivery UI.
  </instructions>
  <resume-signal>Type "done" once installed and a delivery shows as successful</resume-signal>
</task>

</tasks>

<verification>
- Human action checkpoint must complete
</verification>

<success_criteria>
- App installed + webhook delivering successfully
- Cutover runbook exists
</success_criteria>

<output>
After completion, create `.planning/phases/13-xbmc-cutover/13-01-SUMMARY.md`
</output>
