---
milestone: v0.20
audited: 2026-02-25T21:00:00Z
status: gaps_found
scores:
  requirements: 17/20
  phases: 3/4
  integration: 18/20
  flows: 5/7
gaps:
  requirements:
    - id: "LLM-02"
      status: "partial"
      phase: "97"
      claimed_by_plans: ["97-01-PLAN.md"]
      completed_by_plans: ["97-01-SUMMARY.md"]
      verification_status: "passed"
      evidence: "Task router built and exported but never wired to createExecutor in index.ts; agentic task routing branch is dead code"
    - id: "LLM-03"
      status: "partial"
      phase: "97"
      claimed_by_plans: ["97-01-PLAN.md"]
      completed_by_plans: ["97-01-SUMMARY.md"]
      verification_status: "passed"
      evidence: ".kodiai.yml models: section parsed but taskRouter not passed to executor; config models section silently inoperative for agentic calls"
    - id: "LLM-05"
      status: "partial"
      phase: "97"
      claimed_by_plans: ["97-02-PLAN.md"]
      completed_by_plans: ["97-02-SUMMARY.md"]
      verification_status: "passed"
      evidence: "CostTracker module built but never instantiated or wired in index.ts; Agent SDK calls write zero cost rows; wiki-staleness-detector omits repo field so AI SDK cost tracking also silently skips"
  integration:
    - from: "Phase 97 (LLM infrastructure)"
      to: "src/index.ts (executor wiring)"
      issue: "createExecutor called without costTracker or taskRouter dependencies"
      affected_requirements: ["LLM-02", "LLM-03", "LLM-05"]
    - from: "Phase 99 (wiki-staleness-detector)"
      to: "Phase 97 (generateWithFallback cost tracking)"
      issue: "generateWithFallback call omits repo field; cost tracking guard silently skips"
      affected_requirements: ["LLM-05"]
  verification:
    - phase: "100"
      issue: "Missing VERIFICATION.md"
      impact: "CLST-01 through CLST-05 verified via REQUIREMENTS.md checkboxes only, no formal verification document"
tech_debt:
  - phase: 97-multi-llm-routing-cost-tracking
    items:
      - "Executor costTracker and taskRouter deps not wired in index.ts (GAP-1)"
      - "wiki-staleness-detector missing repo field in generateWithFallback call (GAP-2)"
  - phase: 98-contributor-profiles-identity-linking
    items:
      - "REQUIREMENTS.md traceability table shows PROF-01-05 as Pending despite being complete"
  - phase: 99-wiki-staleness-detection
    items:
      - "REQUIREMENTS.md traceability table shows WIKI-01-05 as Pending despite being complete"
  - phase: 100-review-pattern-clustering
    items:
      - "Missing VERIFICATION.md"
      - "SUMMARY.md files lack requirements_completed frontmatter"
---

# Milestone v0.20 Audit: Multi-Model & Active Intelligence

## Overview

**Audited:** 2026-02-25
**Status:** gaps_found
**Phases:** 4 (97-100)
**Plans:** 15/15 complete

## Requirement Coverage (3-Source Cross-Reference)

| REQ-ID | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|-----------------|---------------------|-----------------|--------------|
| LLM-01 | passed | listed (97-03) | [x] Complete | **satisfied** |
| LLM-02 | passed | listed (97-01) | [x] Complete | **partial** (integration gap) |
| LLM-03 | passed | listed (97-01) | [x] Complete | **partial** (integration gap) |
| LLM-04 | passed | listed (97-03) | [x] Complete | **satisfied** |
| LLM-05 | passed | listed (97-02) | [x] Complete | **partial** (integration gap) |
| PROF-01 | passed | listed (98-01) | [ ] Pending | **satisfied** (update checkbox) |
| PROF-02 | passed | listed (98-02, 98-04) | [ ] Pending | **satisfied** (update checkbox) |
| PROF-03 | passed | listed (98-03) | [ ] Pending | **satisfied** (update checkbox) |
| PROF-04 | passed | listed (98-04) | [ ] Pending | **satisfied** (update checkbox) |
| PROF-05 | passed | listed (98-01) | [ ] Pending | **satisfied** (update checkbox) |
| WIKI-01 | passed | listed (99-01, 99-02, 99-03) | [ ] Pending | **satisfied** (update checkbox) |
| WIKI-02 | passed | listed (99-02) | [ ] Pending | **satisfied** (update checkbox) |
| WIKI-03 | passed | listed (99-01, 99-03) | [ ] Pending | **satisfied** (update checkbox) |
| WIKI-04 | passed | listed (99-01, 99-03) | [ ] Pending | **satisfied** (update checkbox) |
| WIKI-05 | passed | listed (99-02, 99-03) | [ ] Pending | **satisfied** (update checkbox) |
| CLST-01 | missing | missing | [x] Done | **partial** (verification gap) |
| CLST-02 | missing | missing | [x] Done | **partial** (verification gap) |
| CLST-03 | missing | missing | [x] Done | **partial** (verification gap) |
| CLST-04 | missing | missing | [x] Done | **partial** (verification gap) |
| CLST-05 | missing | missing | [x] Done | **partial** (verification gap) |

**Summary:** 15 satisfied, 5 partial (3 integration gaps + 5 verification gaps overlapping), 0 unsatisfied

## Phase Verification Status

| Phase | VERIFICATION.md | Status | Requirements |
|-------|-----------------|--------|--------------|
| 97: Multi-LLM Routing | Yes | passed | LLM-01-05 all passed |
| 98: Contributor Profiles | Yes | passed | PROF-01-05 all passed |
| 99: Wiki Staleness | Yes | passed | WIKI-01-05 all passed |
| 100: Pattern Clustering | **Missing** | unverified | CLST-01-05 not verified |

## Integration Check Results

### Connected (18 exports properly wired)
- Phase 97 → Phase 99: generateWithFallback for staleness LLM evaluation
- Phase 97 → Phase 100: generateWithFallback for cluster label generation
- Phase 98 → Review pipeline: contributor profile store, expertise scoring
- Phase 100 → Review pipeline: cluster pattern matcher and prompt injection
- Phase 98 → Slack: slash command route with HMAC verification
- Phase 99 → Slack: postStandaloneMessage for staleness reports

### Gaps Found (2 integration issues)

**GAP-1: Executor missing costTracker and taskRouter** (affects LLM-02, LLM-03, LLM-05)

In `src/index.ts` line 245, `createExecutor({ githubApp, logger })` is called without `taskRouter` or `costTracker` dependencies. Both were built in Phase 97 but never wired to the executor. This means:
- Agent SDK calls (reviews, mentions, Slack) never write cost rows
- `.kodiai.yml` `models:` routing is silently inoperative for agentic tasks
- The code paths in executor.ts are guarded by `if (deps.costTracker)` / `if (deps.taskRouter)` and never execute

**GAP-2: Wiki staleness detector missing repo in generateWithFallback call** (affects LLM-05)

In `src/knowledge/wiki-staleness-detector.ts` lines 302-308, the `generateWithFallback` call passes `costTracker` but omits the `repo` field. The cost tracking guard in `generate.ts` line 67 (`opts.costTracker && opts.repo`) silently skips the write.

### E2E Flows

| Flow | Status |
|------|--------|
| PR review with contributor profile adaptation | Complete |
| Slash command identity linking | Complete |
| Wiki staleness scheduled scan | Complete |
| Cluster pattern injection in reviews | Complete |
| On-demand wiki-check trigger | Complete |
| Agent SDK cost tracking | **Broken** (costTracker not wired) |
| Agentic task model routing via .kodiai.yml | **Broken** (taskRouter not wired) |

## Documentation Gaps

- REQUIREMENTS.md traceability table: PROF-01-05 and WIKI-01-05 show "Pending" despite being complete
- Phase 100: Missing VERIFICATION.md document
- Phase 100: SUMMARY.md files lack requirements_completed frontmatter

---
*Audited: 2026-02-25*
