# Requirements Archive: v0.11 Issue Workflows

**Archived:** 2026-02-16
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Kodiai

**Defined:** 2026-02-16
**Core Value:** When a PR is opened or `@kodiai` is mentioned, the bot responds with accurate, actionable code feedback without requiring workflow setup in the target repo.

## v0.11 Requirements

Requirements for v0.11 Issue Workflows. Each maps to roadmap phases.

### Issue Q&A

- [x] **ISSUE-01**: When mentioned in an issue comment, Kodiai replies in-thread with a concrete, actionable answer (includes file-path pointers when relevant)
- [x] **ISSUE-02**: Issue Q&A responses are clearly read-only unless explicitly triggered into write-mode via `apply:` / `change:`

### Issue Write-Mode

- [x] **IWR-01**: In an issue comment, `@kodiai apply: <request>` (or `change:`) can create a PR against the repo default branch when `write.enabled: true`
- [x] **IWR-02**: Replays of the same trigger are idempotent (deterministic branch name; existing PR is reused)
- [x] **IWR-03**: Issue write-mode enforces existing write policy guardrails (allowPaths/denyPaths + secret scanning) and posts a clear refusal message on violation

### Permissions and Failure UX

- [x] **PERM-01**: When PR creation/push is blocked by missing GitHub App permissions, Kodiai replies with the minimum required permissions (no token leakage)
- [x] **PERM-02**: When write-mode is disabled for a repo, Kodiai replies with the minimal `.kodiai.yml` config to enable it

### Operational Safety

- [x] **SAFE-01**: Issue write-mode is never triggered without an explicit `apply:` / `change:` prefix
- [x] **SAFE-02**: Rate limiting and in-flight de-dupe apply to issue write-mode, preventing duplicate PR creation

## Future Requirements

Deferred to a future milestone.

- **SLACK-01**: Slack integration for `#kodiai` thread-only support
- **RET-07**: Multi-query retrieval and code snippet indexing improvements
- **LLM-01**: Multi-LLM pluggable providers (Codex CLI, etc.)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Automatic PR creation from read-only issue mention | Too risky; requires explicit `apply:` / `change:` intent |
| Writing changes without `write.enabled: true` | Must remain explicit opt-in per repo |
| Multi-repo issue context inference | Keep v0.11 scoped; require explicit repo context (GitHub issue already supplies it) |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| ISSUE-01 | Phase 60 | Satisfied |
| ISSUE-02 | Phase 61 | Satisfied |
| IWR-01 | Phase 62 | Satisfied |
| IWR-02 | Phase 63 | Satisfied |
| IWR-03 | Phase 64 | Satisfied |
| PERM-01 | Phase 65 | Satisfied |
| PERM-02 | Phase 65 | Satisfied |
| SAFE-01 | Phase 61 | Satisfied |
| SAFE-02 | Phase 63 | Satisfied |

**Coverage:**
- v0.11 requirements: 9 total
- Mapped to phases: 9
- Unmapped: 0

---
*Requirements defined: 2026-02-16*
*Last updated: 2026-02-16 -- v0.11 Issue Workflows requirements verified and satisfied*
