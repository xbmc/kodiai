# Requirements Archive: v0.7 Intelligent Review Content

**Archived:** 2026-02-14
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Kodiai v0.7 Intelligent Review Content

**Defined:** 2026-02-14
**Core Value:** When a PR is opened or `@kodiai` is mentioned, the bot responds with accurate, actionable code feedback without requiring workflow setup in the target repo.

## v0.7 Requirements

### Language-Aware Enforcement

- [ ] **LANG-01**: Bot auto-suppresses formatting violations when formatter config detected (`.prettierrc`, `.clang-format`, `.black.toml`, `.editorconfig`)
- [ ] **LANG-02**: Bot auto-suppresses import order violations when linter config detected
- [ ] **LANG-03**: C++ null dereference findings are enforced as CRITICAL severity
- [ ] **LANG-04**: C++ uninitialized member findings are enforced as CRITICAL severity
- [ ] **LANG-05**: Go unchecked error findings are enforced as MAJOR severity
- [ ] **LANG-06**: Python bare except findings are enforced as MAJOR severity
- [ ] **LANG-07**: Language severity floors are enforced post-LLM-execution (deterministic, not prompt-driven)
- [ ] **LANG-08**: CRITICAL findings are never suppressed by language rules
- [ ] **LANG-09**: Language rules are configurable per-repo via `.kodiai.yml`
- [ ] **LANG-10**: Unknown languages fall back to generic review without error

### Large PR Intelligence

- [ ] **LARGE-01**: Bot computes risk score for each file in PR using composite heuristics (lines changed, path risk, category, churn)
- [ ] **LARGE-02**: Bot prioritizes files by risk score when PR exceeds 50 files
- [ ] **LARGE-03**: Bot reviews top 50 files by risk score for large PRs
- [ ] **LARGE-04**: Bot uses tiered analysis (full for top 30, abbreviated for next 20, mention for rest) not binary include/exclude
- [ ] **LARGE-05**: Bot discloses coverage in Review Details ("Reviewed 50/312 files, prioritized by risk")
- [ ] **LARGE-06**: Risk scoring weights are configurable via `.kodiai.yml`
- [ ] **LARGE-07**: Skipped files are listed with risk scores for transparency
- [ ] **LARGE-08**: File limit threshold (50) is configurable per-repo

### Feedback-Driven Learning

- [ ] **FEED-01**: Bot tracks thumbs-down reactions on review comments
- [ ] **FEED-02**: Bot aggregates feedback by finding fingerprint (file path + title pattern)
- [ ] **FEED-03**: Bot auto-suppresses patterns after 3+ thumbs-down from 3+ distinct reactors across 2+ PRs
- [ ] **FEED-04**: CRITICAL findings are never auto-suppressed via feedback
- [ ] **FEED-05**: MAJOR findings in security/correctness categories are never auto-suppressed via feedback
- [ ] **FEED-06**: Bot adjusts confidence scores based on feedback (+10 for thumbs-up, -20 for thumbs-down)
- [ ] **FEED-07**: Bot reports auto-suppressed patterns in Review Details ("3 patterns auto-suppressed based on prior feedback")
- [ ] **FEED-08**: Feedback-driven suppression requires explicit opt-in via `.kodiai.yml`
- [ ] **FEED-09**: Suppression thresholds (3 thumbs-down, 3 reactors, 2 PRs) are configurable
- [ ] **FEED-10**: Bot provides mechanism to view and clear feedback-based suppressions

## Future Requirements

### Enhanced Language Coverage (v0.8+)

- **LANG-11**: Expand language-specific rules beyond 9 current languages (Python, Go, Rust, Java, C++, C, Ruby, PHP, Swift)
- **LANG-12**: Add language-specific anti-patterns (e.g., Ruby `method_missing` overuse, Go goroutine leaks)

### Advanced Risk Scoring (v0.8+)

- **LARGE-09**: Include git churn frequency in risk score
- **LARGE-10**: Add semantic similarity to previously flagged files in risk score

### Feedback Analytics (v0.8+)

- **FEED-11**: Provide dashboard of most suppressed patterns per repo
- **FEED-12**: Detect and warn about potential feedback gaming (mass reactions from single actor)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Linter runtime dependencies (ESLint, Ruff, Clippy) | Workspace lacks toolchains; adds 10-30s latency; config varies per repo |
| AST parsing for complexity metrics | Lines changed + path signals are better predictors; AST libs add dependencies |
| ML models for risk scoring | Heuristics are transparent, debuggable, sufficient; ML adds complexity without proven benefit |
| Embedding-based feedback clustering | Exact-match handles 80% of cases; embeddings add complexity for marginal gain in v0.7 |
| PR split recommendations | Low impact; humans already know PR is too big |
| Real-time reaction webhooks | GitHub API doesn't support; polling is architecturally correct |

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| LANG-01 | Phase 39 | Pending |
| LANG-02 | Phase 39 | Pending |
| LANG-03 | Phase 39 | Pending |
| LANG-04 | Phase 39 | Pending |
| LANG-05 | Phase 39 | Pending |
| LANG-06 | Phase 39 | Pending |
| LANG-07 | Phase 39 | Pending |
| LANG-08 | Phase 39 | Pending |
| LANG-09 | Phase 39 | Pending |
| LANG-10 | Phase 39 | Pending |
| LARGE-01 | Phase 40 | Pending |
| LARGE-02 | Phase 40 | Pending |
| LARGE-03 | Phase 40 | Pending |
| LARGE-04 | Phase 40 | Pending |
| LARGE-05 | Phase 40 | Pending |
| LARGE-06 | Phase 40 | Pending |
| LARGE-07 | Phase 40 | Pending |
| LARGE-08 | Phase 40 | Pending |
| FEED-01 | Phase 41 | Pending |
| FEED-02 | Phase 41 | Pending |
| FEED-03 | Phase 41 | Pending |
| FEED-04 | Phase 41 | Pending |
| FEED-05 | Phase 41 | Pending |
| FEED-06 | Phase 41 | Pending |
| FEED-07 | Phase 41 | Pending |
| FEED-08 | Phase 41 | Pending |
| FEED-09 | Phase 41 | Pending |
| FEED-10 | Phase 41 | Pending |

**Coverage:**
- v0.7 requirements: 28 total
- Mapped to phases: 28
- Unmapped: 0

---
*Requirements defined: 2026-02-14*
*Last updated: 2026-02-14 after roadmap creation*
