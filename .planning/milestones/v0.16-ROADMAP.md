# Milestone v0.16: Review Coverage & Slack UX

**Status:** SHIPPED 2026-02-24
**Phases:** 82-85
**Total Plans:** 6

## Overview

Expand review coverage to draft PRs, make Slack responses concise and conversational, verify Azure deployment health with embeddings smoke testing, and address code review findings (memory leaks, hardcoded defaults, type safety, rate limiting).

## Phases

### Phase 82: Draft PR Review Coverage
**Goal**: Draft PRs receive the same review treatment as non-draft PRs, with clear visual acknowledgment of draft status
**Depends on**: Phase 81
**Requirements**: REV-01, REV-02
**Success Criteria** (what must be TRUE):
  1. When a draft PR is opened, Kodiai posts a review (no skip/ignore behavior)
  2. The review output for a draft PR contains a visible indicator that the PR is in draft state
  3. Non-draft PR review behavior is unchanged (no regressions)
**Plans**: 1 plan

Plans:
- [x] 82-01-PLAN.md — Remove draft skip, add draft-aware tone/badge to review prompt and comment validation, with tests

### Phase 83: Slack Response Conciseness
**Goal**: Slack responses read like chat messages from a knowledgeable colleague, not like documentation pages
**Depends on**: Phase 81
**Requirements**: SLK-07, SLK-08, SLK-09, SLK-10
**Success Criteria** (what must be TRUE):
  1. Slack responses begin with the answer directly -- no leading phrases like "Here's what I found" or "Based on the codebase"
  2. Slack responses never include a Sources or References section at the end
  3. Simple factual questions receive 1-3 sentence answers without headers or bullet lists
  4. Complex questions receive proportionally longer answers but still use minimal formatting (no unnecessary headers/structure)
**Plans**: 1 plan

Plans:
- [x] 83-01-PLAN.md — Rewrite Slack assistant prompt for conciseness, tone, and formatting rules

### Phase 84: Azure Deployment Health
**Goal**: Confirm VoyageAI embeddings work in the deployed Azure environment, add a startup smoke test, and ensure clean container startup with no error-level output
**Depends on**: Phase 83
**Plans**: 2 plans

Plans:
- [x] 84-01-PLAN.md — Add embeddings smoke test and fix deploy.sh env vars
- [x] 84-02-PLAN.md — Deploy to Azure, verify health, and triage container logs

### Phase 85: Code Review Fixes
**Goal**: Eliminate memory leak vectors, fix hardcoded defaults, improve type safety, and add operational guardrails identified by code review
**Depends on**: Phase 84
**Plans**: 2 plans

Plans:
- [x] 85-01-PLAN.md — InMemoryCache utility + migrate 4 unbounded stores (C-2, C-3, H-1, H-3)
- [x] 85-02-PLAN.md — Fix hardcoded repo, structured logging, type safety, telemetry purge, Slack timeout/rate limiting (C-1, H-4, H-5, H-8, H-10, M-2)

---

## Milestone Summary

**Key Decisions:**
- ready_for_review action forces isDraft=false regardless of pr.draft payload value
- Draft framing only applies to standard template, not delta re-review template
- Prompt encodes all four conciseness dimensions inline rather than referencing external config
- Embeddings smoke test uses void Promise pattern, non-blocking, logs pass/fail at boot
- Dockerfile must use Debian (not Alpine) for sqlite-vec glibc compatibility
- All in-memory caches use createInMemoryCache with lazy eviction (no timers), Map insertion order as LRU proxy
- Inline Map-based rate limiter for Slack events rather than external dependency

**Issues Resolved:**
- sqlite-vec loading failure in production (glibc/musl mismatch)
- Missing VOYAGE_API_KEY and Slack env vars in deploy.sh
- 4 unbounded memory leak vectors (ThreadSessionStore, WriteConfirmationStore, Deduplicator, Slack installation cache)
- Hardcoded DEFAULT_REPO constant preventing multi-repo deployment

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

_For current project status, see .planning/ROADMAP.md_
