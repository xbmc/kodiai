---
milestone: v0.22
milestone_name: Issue Intelligence
status: passed
audited: "2026-02-27"
requirements_total: 19
requirements_pass: 19
requirements_fail: 0
gaps_fixed: 1
---

# v0.22 Milestone Audit: Issue Intelligence

## Requirements Coverage

| Requirement | Status | Evidence |
|---|---|---|
| INGEST-01 | PASS | `scripts/backfill-issues.ts` — default repo `xbmc/xbmc` |
| INGEST-02 | PASS | Voyage AI embeddings + HNSW index in migration 014 |
| INGEST-03 | PASS | `issue-backfill.ts:216` — `if (item.pull_request) continue` |
| INGEST-04 | PASS | `updateIssueSyncState()` with `lastPageCursor` |
| INGEST-05 | PASS | Structured logging: page, embeddings, rate limit |
| INGEST-06 | PASS | `.github/workflows/nightly-issue-sync.yml` cron + `--sync` |
| INGEST-07 | PASS | `backfillIssueComments()` in both backfill and sync modes |
| DUPL-01 | PASS | `duplicate-detector.ts` queries corpus at high threshold |
| DUPL-02 | PASS | `triage-comment.ts` renders top-3 with scores/titles/status |
| DUPL-03 | PASS | Only `createComment` + `addLabels`, never close |
| DUPL-04 | PASS | `catch` returns `[]`, triage continues |
| PRLINK-01 | PASS | `issue-reference-parser.ts` regex patterns |
| PRLINK-02 | PASS | `issue-linker.ts` semantic fallback |
| PRLINK-03 | PASS | `buildLinkedIssuesSection()` in review prompt |
| PRLINK-04 | PASS | `[issue: #N]` citations in cross-corpus RRF |
| TRIAGE-01 | PASS | `issues.opened` handler registered + wired |
| TRIAGE-02 | PASS | `autoTriageOnOpen` config gate (default: false) |
| TRIAGE-03 | PASS | `findDuplicateCandidates()` in triage flow |
| TRIAGE-04 | PASS | Fixed: `cooldownMinutes` now enforced in issue-opened.ts via atomic DB claim with cooldown window (commit `0a8563e`) |

## Gaps Found & Fixed

### TRIAGE-04: Missing cooldown enforcement (FIXED)

**Gap:** `issue-opened.ts` had delivery-ID dedup + DB claim + comment scan but did not enforce `triage.cooldownMinutes` per-issue cooldown.

**Fix:** Changed `claimIssueTriage()` from `ON CONFLICT DO NOTHING` to `ON CONFLICT DO UPDATE ... WHERE triaged_at < now() - cooldownMinutes`. This enforces the cooldown atomically in the same DB query.

**Commit:** `0a8563e` — `fix(107): enforce cooldownMinutes in issue-opened handler (TRIAGE-04)`

## Phase Completion Status

| Phase | Plans | Summaries | Status |
|-------|-------|-----------|--------|
| 106: Historical Corpus Population | 2/2 | Missing (pre-GSD session) | Complete |
| 107: Duplicate Detection & Auto-Triage | 2/2 | 2/2 | Complete |
| 108: PR-Issue Linking | 2/2 | 2/2 | Complete |
| 109: Issue Corpus Retrieval Integration | 1/1 | 1/1 | Complete |

**Note:** Phase 106 summaries are missing because it was executed before the GSD summary template was in use. All code artifacts are verified present.

## Conclusion

All 19 v0.22 requirements are satisfied. One gap (TRIAGE-04 cooldown) was found and fixed during audit. Milestone is ready for completion.
